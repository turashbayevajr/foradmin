<!DOCTYPE html>
<html>
<head>
	<title><%= title1%></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.3/css/bootstrap.min.css" integrity="sha512-SbiR/eusphKoMVVXysTKG/7VseWii+Y3FdHrt0EpKgpToZeemhqHeZeLWLhJutz/2ut2Vw1uQEj2MbRF+TVBUA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.3/js/bootstrap.bundle.min.js" integrity="sha512-i9cEfJwUwViEPFKdC1enz4ZRGBj8YQo6QByFTF92YXHi7waCqyexvRD75S5NVTsSiTv7rKWqG9Y5eFxmRsOn0A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./css/main.css">

</head>
<%- include('layout/header') %>

<body>    
    <div class="container">
        <div class="row my-4">
        <div class="col-lg-12">
            <% if(message) { %>
                <div class="alert alert-dismissible fade show alert-<%= message.type %>"
                    role="alert">
                    <button class="btn-closse" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
                    <strong><%= message.message %></strong>
                </div>
            <%} %>
             <div class="table-responsive">
                <% if(posts != '') { %>
                <table class="table table-striped  my-3">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Message</th>
                            <th>Image</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                  <% posts.forEach((row, index) => { %>
                    <tr>
                        <td><%= row.title %></td>
                        <td><%= row.message %></td>
                        <td><img src="<%= row.image %>" width="60" class="img-thumbnail"/></td>
                        <td>
                            <a href="/edit/<%= row._id %>" class="text-succes">
                                <i class="fas fa-edit fa=lg mx-1"></i>
                            </a>
                            <a href="/delete/<%= row._id %>" class="text-danger">
                                <i class="fas fa-trash fa=lg mx-1"></i>
                            </a>
                        </td>
                    </tr>
                  <% }) %> 
                    </tbody>
                </table>
                <% } else { %>
                    <h1 class="text-center text-secondary mt-5">NO post in the db</h1>
                    <% } %>
             </div>
        </div>
        </div>
    </div>
    <div class="text-center mt-3">
        <a href="/home" class="btn btn-warning">Go to Home</a>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.13.2/datatables.min.js"></script>
    <script>
        $(document).ready(function(){
            $("table").DataTable({
                order: [0, 'desc']
            });
        });
    </script>
</body>